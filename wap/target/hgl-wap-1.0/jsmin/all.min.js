function displaySubMenu(a){var b=a.getElementsByTagName("ul")[0];b.style.display="block"}function hideSubMenu(a){var b=a.getElementsByTagName("ul")[0];b.style.display="none"}function validateNumber(a){var b=a.value;b=b.replace(/[\d+]/ig,"");if(b.length>0){$(a).focus();return false}return true}function isNull(c){if(c==""){return true}var a="^[ ]+$";var b=new RegExp(a);return b.test(c)}function isTel(b){if(isNull(b)){return true}var a=b.length;if(a>6&&a<13){return true}else{return false}return true}function isDate(c){if(isNull(c)){return true}var a=c.match(/^(\d{4})(-|\/)(\d{1,2})(-|\/)(\d{1,2})$/);if(a==null){return false}var b=new Date(a[1],a[3]-1,a[5]);return(b.getFullYear()==a[1]&&(b.getMonth()+1)==a[3]&&b.getDate()==a[5])}function isDatetime(e){if(isNull(e)){return true}var a=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;var b=e.match(a);if(b==null){return false}var c=new Date(b[1],b[3]-1,b[4],b[5],b[6],b[7]);return(c.getFullYear()==b[1]&&(c.getMonth()+1)==b[3]&&c.getDate()==b[4]&&c.getHours()==b[5]&&c.getMinutes()==b[6]&&c.getSeconds()==b[7])}String.prototype.IsDate=function(){var a=this.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(a==null){return false}var b=new Date(a[1],a[3]-1,a[4]);return(b.getFullYear()==a[1]&&(b.getMonth()+1)==a[3]&&b.getDate()==a[4])};String.prototype.IsTime=function(){var b=this.match(/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/);if(b==null){return false}if(b[1]>24||b[3]>60||b[4]>60){return false}return true};function isNumber(c){var a="^[0-9]+$";var b=new RegExp(a);if(c.search(b)!=-1){return true}else{return false}}function isPassWord(f){var a=f.length;if(a<8||a>32){return false}var b=false,h=false;for(var c=0,g=a;c<g;c++){var e=f.charCodeAt(c);if((e>=65&&e<=90)||(e>=97&&e<=122)){h=true}var d=f.substr(c,1);if(isNumber(d)){b=true}}return b&&h}function checkMobile(c){if(isNull(c)){return true}var a=/^[1][0-9][0-9]{9}$/;var b=new RegExp(a);if(b.test(c)){return true}else{return false}}function isMoney(c){if(isNull(c)){return true}var a="^[0-9]+[.][0-9]{0,3}$";var b=new RegExp(a);if(b.test(c)){return true}else{alert("您输入的不是合法金额!");$(domEle)[0].focus();return false}}function isEmail(a){if(isNull(a)){return true}var b=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!b.test(a)){return false}return true}function isFloat(b){if(isNull(b)){return true}var a=/^[0-9]*\.?[0-9]*$/;if(!a.test(b)){return false}else{if(parseFloat(b)!=b){return false}}return true}function isIDno(g){if(isNull(g)){return true}var e={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙 �?",21:"辽宁",22:"吉林",23:"黑龙 �?",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};var c=0;var h="";var f=g.length;if(!/^\d{17}(\d|x)$/i.test(g)&&!/^\d{15}$/i.test(g)){return false}g=g.replace(/x$/i,"a");if(e[parseInt(g.substr(0,2))]==null){return false}if(f==18){sBirthday=g.substr(6,4)+"-"+Number(g.substr(10,2))+"-"+Number(g.substr(12,2));var j=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate())){return false}for(var b=17;b>=0;b--){c+=(Math.pow(2,b)%11)*parseInt(g.charAt(17-b),11)}if(c%11!=1){return false}}else{if(f==15){sBirthday="19"+g.substr(6,2)+"-"+Number(g.substr(8,2))+"-"+Number(g.substr(10,2));var j=new Date(sBirthday.replace(/-/g,"/"));var a=j.getFullYear().toString()+"-"+(j.getMonth()+1)+"-"+j.getDate();if(sBirthday!=a){return false}}}return true}var inBlur=null;$(document).ready(function(){$("input.inputNumber").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("keyup",function(){var c=validateNumber(a);a.value=a.value.replace(/\D/g,"");return c})});$("input.number").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("keyup",function(){var c=validateNumber(a);a.value=a.value.replace(/\D/g,"");return c})});$(".phone").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){if(!(isTel(a.value))&&(!checkMobile(a.value))){return false}})});$(".date").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){if(!(isDate(a.value))){return false}})});$(".money").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){var d=a.value;var c=isMoney(d);if(!c){return false}})});$(".email").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){var d=a.value;var c=isEmail(d);if(!c){return false}})});$(".float").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){var d=a.value;var c=isFloat(d);if(!c){return false}})});$(".idno").each(function(b,a){$(a).bind("focus",function(){inBlur=$(a)});$(a).bind("blur",function(){var c=isIDno(a.value);if(!c){return false}})})});function validateForm(a){var d=a;if(typeof(a)=="string"){d=$("#"+a)}var e=true;var b=$(d).serializeArray();for(domEleIdx in b){var c=$("[name="+b[domEleIdx].name+"]");if($(c).hasClass("inputNotNull")){e=!isNull(c[0].value);if(!e){alert(c[0].title+" 不能为空!")}if(!e){return false}}if($(c).hasClass("money")){e=isMoney(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("password")){e=isPassWord(c[0].value);if(!e){alert("您输入的密码格式错误!");return false}}if($(c).hasClass("phone")){e=checkMobile(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("tel")){e=isTel(c[0].value)||checkMobile(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("date")){e=isDate(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("datetime")){e=isDatetime(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("email")){e=isEmail(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("idno")){e=isIDno(c[0].value);if(!e){return showErrorWin(c)}}if($(c).hasClass("float")){e=isFloat(c[0].value);if(!e){return showErrorWin(c)}}}if(!e){return false}return true}function _validateForm(a){var b=true;$(".inputNotNull").each(function(f,e){b=!isNull(e.value);if(!b){alert(e.title+" 不能为空!");return false}});if(!b){return false}var d=true;var c;$(".money").each(function(f,e){c=e;d=isMoney(e.value);if(!d){return showErrorWin(c)}});if(d){$(".phone").each(function(f,e){c=e;d=isTel(e.value)||checkMobile(e.value);if(!d){return showErrorWin(c)}})}if(d){$(".date").each(function(f,e){c=e;d=isDate(e.value);if(!d){return showErrorWin(c)}})}if(d){$(".email").each(function(f,e){c=e;d=isEmail(e.value);if(!d){return showErrorWin(c)}})}if(d){$(".idno").each(function(f,e){c=e;d=isIDno(e.value);if(!d){return showErrorWin(c)}})}if(d){$(".float").each(function(f,e){c=e;d=isIDno(e.value);if(!d){return showErrorWin(c)}})}if(!d){return d}return d=true}function showErrorWin(a){alert("您输入的 '"+a[0].title+"' 数据格式错误!");return false}function date_compare(k,g){if(k==null){var h=new Date();k=h.getFullYear()+"-";k+=(h.getMonth()+1)+"-";k+=h.getDate()}var c=k.split("-");var i=new Date(c[0],c[1],c[2]);var f=i.getTime();var j=g.split("-");var a=new Date(j[0],j[1],j[2]);var b=a.getTime();if(f>=b){return false}else{return true}}function datetime_compare(m,h){if(m==null){var i=new Date();m=i.getFullYear()+"-";m+=(i.getMonth()+1)+"-";m+=i.getDate()+" ";m+=i.getHours()+":";m+=(i.getMinutes()+1)+":";m+=i.getSeconds()}var f=m.split(" ")[0].split("-");var j=m.split(" ")[1].split(":");var k=new Date(f[0],f[1],f[2],j[0],j[1],j[2]);var g=k.getTime();var l=h.split(" ")[0].split("-");var c=h.split(" ")[1].split(":");var a=new Date(l[0],l[1],l[2],c[0],c[1],c[2]);var b=a.getTime();if(g>=b){return false}else{return true}}function onSubmitForm(){$.ajax({type:"POST",url:"update",data:$("#editFrm").serialize(),success:function(a){$("#resultDiv").html(a);var b=$($(".messageError")[1]).html();if(b==""){alert("数据保存成功!");document.location.href="./search"}else{b=$($("div.messageError li")).html();alert(b);$("#resultDiv").html("")}},failure:function(a){alert("数据保存失败!")}})}function getCurDateTime(){var c,a=new Date();c=a.getMonth()+1;if(c<10){c="0"+c}var b="";b+=a.getFullYear()+"-";b+=c+"-";b+=a.getDate()+" ";b+=a.getHours()+":";b+=(a.getMinutes()+5)+":";b+=a.getSeconds();return b}function getCurDate(){var c,a=new Date();c=a.getMonth()+1;if(c<10){c="0"+c}var b="";b+=a.getFullYear()+"-";b+=c+"-";b+=a.getDate()+" ";return b}function AutoHeight(){if(getBrowser()=="msie7.0"||getBrowser()=="msie6.0"||getBrowser()=="msie5.0"){var d=Framework_Top.offsetHeight;var b=Framework_Body.offsetHeight;var a=Framework_Bottom.offsetHeight;var e=window.document.body.clientHeight;var c=document.documentElement.clientHeight;if(e>c){e=c}var f=Framework_Mid.offsetHeight;if((d+b+a)<=e){Framework_Body.style.height=(e-d-a)+"px"}else{Framework_Body.style.height=f+"px"}}else{}}function getBrowser(){var b={};var c=navigator.userAgent.toLowerCase();var d=/(msie|firefox|chrome|opera|version).*?([\d.]+)/;var a=c.match(d);b.browser=a[1].replace(/version/,"'safari");b.ver=a[2];return b.browser+b.ver}window.onresize=function(){AutoHeight()};window.onload=function(){AutoHeight()};